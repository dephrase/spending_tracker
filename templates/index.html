{% extends 'base.html'%}

{% block content %}

<div class="content">
<div class="headerbox">
    <h2 class="title-text">Spending Overview</h2>
    <h4 class="centre">Summary of your spending</h4>
</div>
<div class="box1" id="overview">
    <h4 class="left">You have spent a total of £{{total_spending}}</h4>
    <h4 class="left">Your budget for this month is £{{user.budget}}</h4>
    <br>
    <span class="left">Your current budget status is: </span>
    {% if budget_status == "Green" %}
        <span class="green">{{budget_status}}</span>
    {% elif budget_status == "Amber" %}
        <span class="amber">{{budget_status}}</span>
    {% elif budget_status == "Red" %}
        <span class="red">{{budget_status}}</span>
    {% else %}
        <span class="notgood">{{budget_status}}</span>
    {% endif %}
</div>
<div class="box2">
    <h4 class="right">You have made {{total_transactions}} transactions</h4>
</div>
<div class=box1>
    <h4 class="left">Your most frequent merchant is {{frequent_merchant_name}}, with {{frequent_merchant_visits}} purchases</h4>
</div>
<div class="box3">
    <h4 class="right">Your most expensive transaction was {{most_expensive_transaction.transaction_name}},</h4>
    <h4 class="right">costing £{{most_expensive_transaction.amount_spent}} from {{most_expensive_transaction.merchant.merchant_name}}</h4>
</div>
<div class="box2">
    <h4 class="left">Your most frequent tag was {{frequent_tag_name}}, with {{frequent_tag_purchases}} transactions</h4>
</div>
<div class="box1" id="tagbreakdown">
    <h4 class="centre">Spending breakdown by tag</h4>
    {% for key in spent_dict %}
        <p class="left">£{{spent_dict[key]}} spent on {{key}}</p>
    {% endfor %}
</div>
<div class="box2 right" id="tagpercentage">
    <h4 class="centre">Tag breakdown (Percentage)</h4>
    {% for key in tag_percentage %}
        <p class="right">{{tag_percentage[key]}}% spent on {{key}}</p>
    {% endfor %}
</div>
<div class="box1" id="merchantbreakdown">
    <h4 class="centre">Spending breakdown by Merchant</h4>
    {% for key in merch_dict %}
        <p class="left">£{{merch_dict[key]}} spent on {{key}}</p>
    {% endfor %}
</div>
<div class="box3" id="merchantpercentage">
    <h4 class="centre">Merchant breakdown (Percentage)</h4>
    {% for key in merchant_percentage%}
        <p class="right">{{merchant_percentage[key]}}% spent on {{key}}</p>
    {% endfor %}
</div>
<div class="box2">
    <h4 class="centre">Get more info on your spending</h4>
    <div class="links">
        <a class="linktext" href="/transactions">View all transactions</a>
    </div>
</div>
</div>

{% endblock %}